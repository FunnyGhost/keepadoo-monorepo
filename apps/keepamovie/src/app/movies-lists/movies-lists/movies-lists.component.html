<h1 class='font-serif font-bold text-2xl text-purple-900 text-center md:text-left uppercase mb-8'>
  Your movie lists</h1>

<button
  data-test-name='toggleListsVisibility'
  (click)='toggleListVisibility()'
  class='md:hidden absolute top-2 right-2 z-20 bg-white shadow rounded-full h-12 w-12 transform transition duration-200'>
  <svg-icon key='menu' size='lg' class='absolute top-3 right-3 transition duration-200 opacity-0'
            [class.opacity-100]='hideLists'></svg-icon>
  <svg-icon key='close' size='lg' class='absolute top-3 right-3 transition duration-200 opacity-0'
            [class.opacity-100]='!hideLists'></svg-icon>
</button>

<div class='grid grid-cols-1 md:grid-cols-3 gap-0 md:gap-8 mx-2 relative'>
  <section
    class='absolute top-0 left-0 md:static w-full h-full md:w-auto bg-indigo-100 z-10 transform md:transform-none transition duration-200'
    [ngClass]='{"-translate-x-full opacity-0 md:opacity-100": hideLists}'>
    <ng-container *ngIf='moviesLists$ | async; let moviesLists'>
      <ng-container *ngIf='isLoading$ | async; else moviesListsTemplate'>
        <div class='flex justify-center items-center'>
          <svg-icon data-test-name='loading' class='w-24 h-24' key='loading'></svg-icon>
        </div>
      </ng-container>
      <ng-template #moviesListsTemplate>
        <div class='flex flex-col'>
          <button
            data-test-name='createButton'
            (click)='createList()'
            class='flex justify-center items-center text-xs font-sans text-gray-700 rounded bg-yellow-400 shadow-md self-start px-4 py-1 focus:outline-none focus:ring-2 focus:ring-purple-600 hover:bg-yellow-600 hover:text-white transition duration-200'>
            <svg-icon key='plus' class='mr-2' size='lg'></svg-icon>
            <span>
              New list
            </span>
          </button>

          <keepadoo-movies-list
            *ngFor='let moviesList of moviesLists'
            [isSelected]='(selectedListId$ | async) === moviesList.id'
            [moviesList]='moviesList'
            (listClick)='selectList($event)'
          ></keepadoo-movies-list>
        </div>
        <section *ngIf='moviesLists.length === 0'>
        <span class='helper-text'
        >Please use the
          button bellow to create your first list. What fun!</span
        >
        </section>
      </ng-template>
    </ng-container>
  </section>

  <section class='col-span-2' data-test-name='listContent'>
    <router-outlet>
    </router-outlet>
  </section>

  <section
    class='absolute shadow rounded-md top-0 left-0 z-10 w-full h-full transition transform origin-bottom duration-500 bg-white'
    [ngClass]="{'translate-y-0 scale-y-100': createListMode, 'translate-y-full scale-y-0': !createListMode}">
    <keepadoo-movies-list-create (done)='doneCreatingList()'></keepadoo-movies-list-create>
  </section>
</div>

